# SQL Basics

## Database

A structured set of data held in a computer.

- Column
  - Database tables are composed of individual columns corresponding to the attributes of the object.
- Row
  - A row consists of one set of attributes corresponding to one instance that a table describes.
  - Also known as records or tuples.
- Table
  - A table is a predefined format of rows and columns that define an entity.
  - Also known as a file.
- DBMS
  - A **D**ata**B**ase **M**anagement **S**ystem allows a computer to perform database functions of storing, retriving, adding, deleting and modifying data.

## Relational Databases

- One to One
  - Each row in Table A is linked to no more than one row in Table B.
  - This is an attribute of the relatinoship not the tables.
  - A student may have one row in the Contact_Info table.
- One to Many
  - Each row in the table can be related to many rows in the relating table.
  - This allows frequently used information to be saved only once in a table and referenced many times in all other tables.
- Many to Many
  - One or more rows in a table can be related to 0, 1 or many rows in another table.
  - A 3rd table called a mapping or link table is required in order to implement such a relationship.
  - For example Customers can purchase many Products

## Primary Key

- The Primary Key uniquely identifies each record in the table
- Most tables _should_ have a Primary Key
- Each table can have more than one column which is part of its Primary Key (composite key)
- It can either be an attribute that is guaranteed to be unique (such as National Insurance Number) or it can be generated by the DBMS
- The DBMS will enforce the uniqueness of the Primary Key, not allowing repeated records to exist in the table

## Foreign Key

- Natural relationships exist between tables in most database structures, foreign keys are used to create solid relationships.
- Foreign keys ensure that the row of information in Table A corresponds to the correct row of information in Table B.
- The constraint is used to prevent actions that would destroy links between tables.
- It prevents invalid data from being inserted into the foreign key column, because it has to be one of the values contained in the table it points to.
- There is no Uniqueness Constraint for Foreign Keys.
- A table can have any number of Foreign Keys.
- A row cannot be deleted from a reference table if it is in use via a foreign key.

## Designing a Database

### DML (Data Manipulation Language)

- SELECT
- INSERT
- UPDATE
- DELETE

### DDL (Data Definition Language)

- CREATE
- ALTER
- DROP
- TRUNCATE

### DCL (Data Control Language)

- GRANT
- REVOKE

### TCL (Transaction Control Language)

- COMMIT
- ROLLBACK
- SAVEPOINT

## Syntax

- `SP_HELP <name>`
  - Shows the structure of a table
  - Example: `SP_HELP sample`

- `CREATE DATABASE <name>`
  - Creates a database with a specified name
  - Example: `CREATE DATABASE my_db`

- `CREATE TABLE <name> {column type}`
  - Creates a table with a specified column name and type
  - Example: `CREATE TABLE sample { name VARCHAR(10) }`

- `USE <name>`
  - Uses specified database for some data manipulation
  - Example: `USE my_db`

- `SELECT <object> FROM <name>`
  - Selects a specific object / column / row from a specific table
  - Example: `SELECT * FROM sample`

- `ALTER TABLE <name> ALTER <column/row> <name> <type>`
  - Modifies the table's column or row to a different data type
  - Example: `ALTER TABLE sample ALTER COLUMN name VARCHAR(255)`

- `INSERT INTO <name> (column_1, column_2) VALUES ('value_1', 'value_2')`
  - Inserts some data into the columns
  - Example: `INSERT INTO sample (name, surname) VALUES ('John', 'Smith')`

- `UPDATE <name> SET <column> = <new value> WHERE <column> = <existing value>`
  - Updates data in a specific table based on value in a column
  - Example: `UPDATE sample SET name = 'Dev' WHERE name = 'Hubert'`

- `DELETE FROM <name> WHERE <column> = <value>`
  - Removes a row based on a value in a column
  - Example: `DELETE FROM sample WHERE name = 'Dev'`

- `DROP <name>`
  - Deletes an entire table
  - Example: `DROP sample`

### Specific Cases

- If data type is `date` you need to insert a format of `YYYY-MM-DD`.
  - Example: `20200101`
- Do not allow NULL. Can be used as Alter or Insert or during Create Table
  - Example: `ALTER COLUMN <name> VARCHAR(255) NOT NULL`
- Set Primary Key. In create table syntax. Identity is used for Auto-Incrementation => IDENTITY(starting value, increment value)
  - Example: `<column> int IDENTITY(1,1) PRIMARY KEY`

## Data Types

- VARCHAR
  - Adaptable to different lengths of charactes. Records MAX Size.
- CHARACTER or CHAR
  - Data must be at a fixed length. Fixed amount of space used.
- INT
  - Holds a whole number/integer value positive or negative
- DATE or TIME or DATETIME
  - Stores Date, Time or both Date and Time in one variable
- DECIMAL or NUMERIC
  - Fixed Precision and scale (digits to right of decimal point) numbers
- BINARY
  - Use to store binary data such as an image or file
- FLOAT
  - Scientific use (very large numbers)
- BIT
  - Equivalent to binary (0, 1 or NULL)
